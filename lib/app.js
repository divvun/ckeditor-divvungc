"use strict";var debug="file:"===window.location.protocol,log=debug?console.log.bind(window.console):function(){},DEFAULT_LANG="sme",l10n=function l10n(){return void 0===document.l10n&&console.error("l20n.js failed?"),document.l10n},searchToObject=function searchToObject(){var a=window.location.search.substring(1).split("&"),b={};for(var c in a)if(-1<a[c].indexOf("=")){var d=a[c].split("="),f=d[0],g=d[1].replace(/\+/g,"%20");b[decodeURIComponent(f)]=decodeURIComponent(g)}return b};$(document).ready(function(){if(window.location.host.match("^localhost:")){console.log("Connecting to skewer \u2026");var a=document.createElement("script");a.src="https://localhost:38443/skewer",document.body&&document.body.appendChild(a)}});var hideLogin=function hideLogin(){$("#serverfault").hide(),$("#loginform").hide(),$("#content").removeClass("blur"),$("#login-wrapper").removeClass("block-view"),$("#logout").show()},supportedLangs=["sme","fao"],getLang=function getLang(a){return void 0===a.lang?DEFAULT_LANG:a.lang},readLoginFormStoring=function readLoginFormStoring(){var a={u:$("#user").val(),p:$("#password").val()};return""!=a.u&&""!=a.p?(window.localStorage.setItem("userpass",JSON.stringify(a)),a):null},loginFromForm=function loginFromForm(){var a=readLoginFormStoring();return null!=a&&hideLogin(),!1},loginOnEnter=function loginOnEnter(a){13==a.which&&loginFromForm()},loginOnClick=function loginOnClick(a){return loginFromForm(),!1},showLogin=function showLogin(){$("#loginform").show(),$("#content").addClass("blur"),$("#login-wrapper").addClass("block-view"),$("#logout").hide()},logout=function logout(a){return showLogin(),window.localStorage.removeItem("userpass"),$("#user").val(""),$("#password").val(""),!1},initSpinner=function initSpinner(){$("#spinner").hide(),$("#editor").removeClass("loading"),$(document).ajaxStart(function(){$("#spinner").show(),$("#editor").addClass("loading"),$(".ql-check").addClass("glyphicon glyphicon-refresh spinning"),$(".ql-check").addClass("loading-check")}).ajaxStop(function(){$("#spinner").hide(),$("#editor").removeClass("loading"),$(".ql-check").removeClass("glyphicon glyphicon-refresh spinning"),$(".ql-check").removeClass("loading-check")})},safeGetItem=function safeGetItem(a,b){var c=window.localStorage.getItem(a);if(null==c)return b;try{var d=JSON.parse(c);if(null!=d)return d}catch(f){console.log(f)}return b},initExamples=function initExamples(){var a=[];for(var b=1;20>=b;b++)a.push("example"+b.toString()+"_title"),a.push("example"+b.toString());l10n().formatValues.apply(l10n(),a).then(function(c){var d=[],f=[];for(var g=0;g<c.length;g++)0==g%2?d.push(c[g]):f.push(c[g]);for(g=0;g<d.length;g++)if(!d[g].match(/^example[0-9]+_title$|^$/)){var h=$(document.createElement("button"));h.text(d[g]),h.attr("type","button"),h.addClass("btn btn-default"),$(h).click({text:f[g]},function(j){CKEDITOR.instances.ckeditor.setData(j.data.text.replace("\n","<br>"))}),$("#examples").append(h),$("#examples").append(" ")}})},initL10n=function initL10n(a){l10n().requestLanguages([a]),l10n().formatValue("editor_placeholder").then(function(b){$(".ql-editor").attr("data-placeholder",b)})},init=function init(){"http:"==window.location.protocol&&$("#password").attr("type","text"),$("#login_b").click(loginOnClick),$("#password").keypress(loginOnEnter),$("#user").keypress(loginOnEnter),$("#logout_b").click(logout),initSpinner();var a=searchToObject();initL10n(getLang(a)),initExamples(),$.ajaxSetup({statusCode:{"401":function _(){showLogin()}}}),CKEDITOR.plugins.addExternal("divvungc",window.location.href+"/ck-plugins/divvungc/","plugin.js"),CKEDITOR.replace("ckeditor",{extraPlugins:"divvungc"});var b="";a.q===void 0?b=safeGetItem("cktext",b):(b=a.q,window.location.search=""),CKEDITOR.on("instanceCreated",function(c){console.log("instanceCreated"),c.editor.setData(b)}),CKEDITOR.instances.ckeditor.setData(b)};$(document).ready(init);
//# sourceMappingURL=app.js.map