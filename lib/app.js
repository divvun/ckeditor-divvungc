"use strict";var debug="file:"===window.location.protocol,log=debug?console.log.bind(window.console):function(){},DEFAULT_LANG="sme",l10n=function(){return void 0===document.l10n&&console.error("l20n.js failed?"),document.l10n},searchToObject=function(){var a=window.location.search.substring(1).split("&"),b={};for(var c in a)if(-1<a[c].indexOf("=")){var d=a[c].split("="),e=d[0],f=d[1].replace(/\+/g,"%20");b[decodeURIComponent(e)]=decodeURIComponent(f)}return b};$(document).ready(function(){if(window.location.host.match("^localhost:")){console.log("Connecting to skewer \u2026");var a=document.createElement("script");a.src="https://localhost:38443/skewer",document.body&&document.body.appendChild(a)}});var hideLogin=function(){$("#serverfault").hide(),$("#loginform").hide(),$("#content").removeClass("blur"),$("#login-wrapper").removeClass("block-view"),$("#logout").show()},supportedLangs=["sme","fao"],getLang=function(a){return void 0===a.lang?DEFAULT_LANG:a.lang},readLoginFormStoring=function(){var a={u:$("#user").val(),p:$("#password").val()};return""!=a.u&&""!=a.p?(window.localStorage.setItem("userpass",JSON.stringify(a)),a):null},loginFromForm=function(){var a=readLoginFormStoring();return null!=a&&hideLogin(),!1},loginOnEnter=function(a){13==a.which&&loginFromForm()},loginOnClick=function(){return loginFromForm(),!1},showLogin=function(){$("#loginform").show(),$("#content").addClass("blur"),$("#login-wrapper").addClass("block-view"),$("#logout").hide()},logout=function(){return showLogin(),window.localStorage.removeItem("userpass"),$("#user").val(""),$("#password").val(""),!1},initSpinner=function(){$("#spinner").hide(),$("#editor").removeClass("loading"),$(document).ajaxStart(function(){$("#spinner").show(),$("#editor").addClass("loading"),$(".ql-check").addClass("glyphicon glyphicon-refresh spinning"),$(".ql-check").addClass("loading-check")}).ajaxStop(function(){$("#spinner").hide(),$("#editor").removeClass("loading"),$(".ql-check").removeClass("glyphicon glyphicon-refresh spinning"),$(".ql-check").removeClass("loading-check")})},safeGetItem=function(a,b){var c=window.localStorage.getItem(a);if(null==c)return b;try{var d=JSON.parse(c);if(null!=d)return d}catch(a){console.log(a)}return b},initExamples=function(){for(var a=[],b=1;b<=20;b++)a.push("example"+b.toString()+"_title"),a.push("example"+b.toString());l10n().formatValues.apply(l10n(),a).then(function(a){for(var b=[],c=[],d=0;d<a.length;d++)0==d%2?b.push(a[d]):c.push(a[d]);for(d=0;d<b.length;d++)if(!b[d].match(/^example[0-9]+_title$|^$/)){var e=$(document.createElement("button"));e.text(b[d]),e.attr("type","button"),e.addClass("btn btn-default"),$(e).click({text:c[d]},function(a){CKEDITOR.instances.ckeditor.setData(a.data.text.replace("\n","<br>"))}),$("#examples").append(e),$("#examples").append(" ")}})},initL10n=function(a){l10n().requestLanguages([a]),l10n().formatValue("editor_placeholder").then(function(a){$(".ql-editor").attr("data-placeholder",a)})},init=function(){"http:"==window.location.protocol&&$("#password").attr("type","text"),$("#login_b").click(loginOnClick),$("#password").keypress(loginOnEnter),$("#user").keypress(loginOnEnter),$("#logout_b").click(logout),initSpinner();var a=searchToObject();initL10n(getLang(a)),initExamples(),$.ajaxSetup({statusCode:{401:function(){showLogin()}}}),CKEDITOR.plugins.addExternal("divvungc",window.location.href+"/ck-plugins/divvungc/","plugin.js"),CKEDITOR.replace("ckeditor",{extraPlugins:"divvungc"});var b="";a.q===void 0?b=safeGetItem("cktext",b):(b=a.q,window.location.search=""),CKEDITOR.on("instanceCreated",function(a){console.log("instanceCreated"),a.editor.setData(b)}),CKEDITOR.instances.ckeditor.setData(b)};$(document).ready(init);
//# sourceMappingURL=app.js.map